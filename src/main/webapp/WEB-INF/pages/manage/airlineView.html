<#assign ctx=request.contextPath>
<div class="container-fluid">
<div class="well well-sm">
    <span>${airline.airlineName}</span>
    <a class="btn btn-info btn-xs pull-right" href="#" id="return">返回</a>
</div>
<div class="container-fluid">
    <div class="row">
    <form class="form-horizontal row" id="addAirline" role="form">
        <input value="${airline.airlineId}" name="airlineId" type="hidden"/>
        <div class="col-md-6">
            <div class="form-group">
                <label for="airlineName" class="col-sm-4 control-label">公司名称</label>
                <div class="col-sm-6">
                    <span>${airline.airlineName}</span>
                    <input type="text" class="form-control hidden" id="airlineName" name="airlineName" value="${airline.airlineName}">
                </div>
            </div>
            <div class="form-group">
                <label for="loginName" class="col-sm-4 control-label">公司账号</label>
                <div class="col-sm-6">
                    <span>${airline.loginName}</span>
                    <input type="text" class="form-control hidden" id="loginName" name="loginName" value="${airline.loginName}">
                </div>
            </div>
            <div class="form-group">
                <label for="status" class="col-sm-4 control-label">显示状态</label>
                <div class="col-sm-6">
                    <span>${airline.status}</span>
                    <select class="form-control hidden" id="status" name="status" value="${airline.status}">
                        <option <#if airline.status=="on">selected</#if>>on</option>
                        <option <#if airline.status=="off">selected</#if>>off</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="weixin" class="col-sm-4 control-label">微信号</label>
                <div class="col-sm-6">
                    <span>${airline.weixin}</span>
                    <input type="text" class="form-control hidden" id="weixin" name="weixin" value="${airline.weixin}">
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="airportId" class="col-sm-3 control-label">位于</label>
                <div class="col-sm-6">
                    <span>${airline.airportName!}</span>
                    <select class="form-control hidden" id="airportId" name="airportId">
                        <#list airports as airport>
                            <option value="${airport.airportId}" <#if airline.airportId==airport.airportId>selected</#if>>${airport.airportName}</option>
                        </#list>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="password" class="col-sm-3 control-label">密码</label>
                <div class="col-sm-6">
                    <span></span>
                    <input type="text" class="form-control hidden" id="password" name="password">
                </div>
            </div>
            <div class="form-group">
                <label for="address" class="col-sm-3 control-label">地址</label>
                <div class="col-sm-6">
                    <span>${airline.address}</span>
                    <input type="text" class="form-control hidden" id="address" name="address" value="${airline.address}">
                </div>
            </div>
            <div class="form-group">
                <label for="phone" class="col-sm-3 control-label">联系电话</label>
                <div class="col-sm-6">
                    <span>${airline.phone}</span>
                    <input type="text" class="form-control hidden" id="phone" name="phone" value="${airline.phone}">
                </div>
            </div>
        </div>
        <div class="col-sm-offset-5 col-sm-4">
            <button type="submit" id="modify" class="btn btn-primary btn-lg">修改</button>
        </div>
    </form>
    </div>
</div>
</div>
<style>.col-sm-6{padding-top: 7px;}</style>
<script>
    $(function(){
        $('#modify').click(function(){
            var eml=$(this);
            var text=eml.text();
            if(text=='修改'){
                $('.col-sm-6 span').hide();
                $('.col-sm-6 input,select').removeClass('hidden').show();
                eml.text('保存');
            }else{
                var json=$('#addAirline').serializeJson();
                $.post('${ctx}/manage/airline/save',json,function(data){
                    if(data.success){
                        $('#content').load('${ctx}/manage/menu/airline/view?airlineId=${airline.airlineId}');
                        $.mhtMsg('保存成功!');

                        $('.col-sm-6 span').show();
                        $('.col-sm-6 input,select').hide();
                        eml.text('修改');
                    }else{
                        $.mhtMsg('保存失败，请重新提交!');
                    }
                });
            }
            return false;
        })

        $('#return').click(function(){
            $('#content').load('${ctx}/manage/menu/airlines');
        })
    })
</script>