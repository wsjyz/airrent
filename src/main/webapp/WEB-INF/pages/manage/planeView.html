<#assign ctx=request.contextPath>
<div class="container-fluid">
<div class="well well-sm">
    <span>${plane.planeName}</span>
    <a class="btn btn-info btn-xs pull-right" href="#" id="return">返回</a>
</div>
<div class="container-fluid">
    <div class="row">
    <form class="form-horizontal row" enctype="multipart/form-data" method="post" id="addPlaneForm" role="form">
        <input name="airlineId" value="${plane.airlineId}" type="hidden"/>
        <input name="planeId" value="${plane.planeId}" type="hidden"/>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="planeName" class="col-sm-4 control-label">名称</label>
                    <div class="col-sm-6">
                        <span>${plane.planeName}</span>
                        <input type="text" class="form-control hidden" id="planeName" name="planeName" value="${plane.planeName}">
                    </div>
                </div>
                <div class="form-group">
                    <label for="planeNo" class="col-sm-4 control-label">飞机型号</label>
                    <div class="col-sm-6">
                        <span>${plane.planeNo}</span>
                        <input type="text" class="form-control hidden" id="planeNo" name="planeNo" value="${plane.planeNo}">
                    </div>
                </div>
                <div class="form-group hidden">
                    <label for="unitCost" class="col-sm-4 control-label">单价</label>
                    <div class="col-sm-6">
                        <span>${plane.unitCost}￥/h</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="unitCost" name="unitCost" value="${plane.unitCost}">
                            <span class="input-group-addon">￥/h</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="planeType" class="col-sm-4 control-label">飞机类型</label>
                    <div class="col-sm-6">
                        <span>${plane.planeType}</span>
                        <input type="text" class="form-control hidden" id="planeType" name="planeType" value="${plane.planeType}">
                    </div>
                </div>
                <div class="form-group">
                    <label for="productArea" class="col-sm-4 control-label">飞机产地</label>
                    <div class="col-sm-6">
                        <span>${plane.productArea}</span>
                        <input type="text" class="form-control hidden" id="productArea" name="productArea" value="${plane.productArea}">
                    </div>
                </div>
                <div class="form-group">
                    <label for="drivingMile" class="col-sm-4 control-label">续航里程</label>
                    <div class="col-sm-6">
                        <span>${plane.drivingMile}km</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="drivingMile" name="drivingMile" value="${plane.drivingMile}">
                            <span class="input-group-addon">km</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="planePrice" class="col-sm-4 control-label">飞机价值</label>
                    <div class="col-sm-6">
                        <span>￥${plane.planePrice}</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="planePrice" name="planePrice" value="${plane.planePrice}">
                            <span class="input-group-addon">￥</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="planeImage" class="col-sm-3 control-label">展示图片</label>
                    <div class="col-sm-6">
                        <span>${plane.planeImageName}</span>
                        <div class="input-group hidden">
                            <input id="planeImage" name="planeImage" type="file" class=""/>
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">${plane.planeImageName}</button>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="sitCounts" class="col-sm-3 control-label">座位数</label>
                    <div class="col-sm-6">
                        <span>${plane.sitCounts}人</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="sitCounts" name="sitCounts" value="${plane.sitCounts}">
                            <span class="input-group-addon">人</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="timeInProduct" class="col-sm-3 control-label">生产年代</label>
                    <div class="col-sm-6">
                        <span>${plane.timeInProduct}年代</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="timeInProduct" name="timeInProduct" value="${plane.timeInProduct}">
                            <span class="input-group-addon">年代</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="colour" class="col-sm-3 control-label">飞机颜色</label>
                    <div class="col-sm-6">
                        <span>${plane.colour}</span>
                        <input type="text" class="form-control hidden" id="colour" name="colour" value="${plane.colour}">
                    </div>
                </div>
                <div class="form-group">
                    <label for="speed" class="col-sm-3 control-label">巡航速度</label>
                    <div class="col-sm-6">
                        <span>${plane.speed}km/h</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="speed" name="speed" value="${plane.speed}">
                            <span class="input-group-addon">km/h</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="flyUnitCost" class="col-sm-3 control-label">飞行小时价格</label>
                    <div class="col-sm-6">
                        <span>${plane.flyUnitCost}￥/h</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="flyUnitCost" name="flyUnitCost" value="${plane.flyUnitCost}">
                            <span class="input-group-addon">￥/h</span>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="showUnitCost" class="col-sm-3 control-label">静态展示价格</label>
                    <div class="col-sm-6">
                        <span>${plane.showUnitCost}￥/天</span>
                        <div class="input-group hidden">
                            <input type="text" class="form-control" id="showUnitCost" name="showUnitCost" value="${plane.showUnitCost}">
                            <span class="input-group-addon">￥/天</span>
                        </div>
                    </div>
                </div>
            </div>
        <div class="col-sm-offset-5 col-sm-4">
            <button type="submit" id="modify" class="btn btn-primary btn-lg">修改</button>
        </div>
    </form>
    </div>
</div>
</div>
<style>.col-sm-6{padding-top: 7px;}</style>
<script src="${ctx}/js/jquery.form.js"></script>
<script>
    $(function(){

        $('#modify').click(function(){
            var eml=$(this);
            var text=eml.text();
            if(text=='修改'){
                $('.col-sm-6 span').hide();
                $('.col-sm-6 input,div.input-group').removeClass('hidden').show();
                $('.input-group-btn').show();
                $(":file").filestyle({buttonText: "重选"});

                eml.text('保存');
            }else{
                $("#modify").on("click",function(){
                    $("#addPlaneForm").ajaxSubmit({
                        type:'post',
                        dataType:'json',
                        url:'${ctx}/manage/plane/save',
                        success:function(data){
                            if(data.success){
                                $('#content').load('${ctx}/manage/menu/plane/view?planeId=${plane.planeId}');
                                $.mhtMsg('保存成功!');

                                $(":file").filestyle('clear');
                                $('.col-sm-6 span').show();
                                $('.col-sm-6 input,div.input-group').hide();
                                eml.text('修改');
                            }else{
                                $.mhtMsg('保存失败，请修改数据格式重新提交!');
                            }
                        },
                        error:function(XmlHttpRequest,textStatus,errorThrown){
                            console.log(XmlHttpRequest);
                            console.log(textStatus);
                            console.log(errorThrown);
                        }
                    });
                });
            }
            return false;
        })

        $('#return').click(function(){
            $('#content').load('${ctx}/manage/menu/airline/manage?airlineId=${plane.airlineId}');
        })
    })
</script>